@startuml erd
skinparam Linetype ortho
skinparam classFontSize 20
scale 1800 * 1800
hide circle

entity user {
    *user_id: <<uuid>>
    ---
    *name: varchar(255)
    *user_level: <<enum UserLevel>>
    *user_status <<enum UserStatus>>
    *email VARCHAR(45)
    *created_at: timestamp
    *edited_at: timestamp
    deleted_at: timestamp
}

entity timesheet {
    *sheet_id: <<uuid>>
    ---
    *user_id: <<uuid>>
    *company_id: <<uuid>>
    *start_date: date
    *end_date: date
    *worked_hours: int
    *worked_minutes: int
    *is_editable: boolean
    *created_at: timestamp
    *edited_at: timestamp
    deleted_at: timestamp
}

entity work_day {
    *sheet_id: <<uuid>>
    *work_date: date
    ---
    *worked_hours: int
    *worked_minutes: int
    commentary: text
    *is_editable: boolean
    *created_at: timestamp
    *edited_at: timestamp
    deleted_at: timestamp
}

entity event {
    *event_id: <<uuid>>
    ---
    *name: varchar(255)
    description: text
    avatar: url
    website: url
    *created_at: timestamp
    *edited_at: timestamp
    deleted_at: timestamp
}

entity event_timespan_range {
    *event_timespan_range_id: <<uuid>>
    *event_id: <<uuid>>
    ---
    *time_from: timestamp
    *time_to: timestamp
}

entity task {
    *task_id: <<uuid>>
    --
    *title: text
    *description: text
    *accomplished_level: int
    date_accomplished: timestamp
    *priority: <<enum TaskPriority>>
    *creator_id: uuid (FK event_staff)
    *created_at: timestamp
    *edited_at: timestamp
    deleted_at: timestamp
}

entity assigned_staff {
    *task_id: <<uuid>>
    *staff_id: <<uuid>>
}

entity event_time_slot {
    *slot_id: <<uuid>>
    *event_id: <<uuid>>
    ----
    *time_from: timestamp
    *time_to: timestamp
    slot_name: varchar(255)
    description: text
    avatar: url
    *created_at: timestamp
    *edited_at: timestamp
    deleted_at: timestamp
}

entity company {
    *company_id: <<uuid>>
    ---
    *name: varchar(255)
    description: text
    avatar: url
    website: url
    *created_at: timestamp
    *edited_at: timestamp
    deleted_at: timestamp
}

entity associated_company {
    *event_id: <<uuid>>
    *company_id: <<uuid>>
    ---
    *association_type: <<enum AssociationType>>
}

entity employment {
    *user_id: <<uuid>>
    *company_id: <<uuid>>
    ---
    *employment_type: <<enum EmploymentType>>
    *hourly_rate: float
    *employee_level: <<enum EmployeeLevel>>
    *created_at: timestamp
    *edited_at: timestamp
    deleted_at: timestamp
}

entity event_staff {
    *user_id: <<uuid>>
    *event_id: <<uuid>>
    ---
    *staff_level: <<enum StaffLevel>>
    *created_at: timestamp
    *edited_at: timestamp
    deleted_at: timestamp
}

entity comment {
    *comment_id: <<uuid>>
    event_id: <<uuid>>
    task_id: <<uuid>>
    *author_id: <<uuid>>
    ---
    *content: text
    *created_at: timestamp
    *edited_at: timestamp
    deleted_at: timestamp
}

user||..||employment
timesheet}o..||employment
timesheet||..o{work_day
employment}o..||company
event||.o{associated_company
company||..o{associated_company
event||..o{event_staff
event||..o{task
event||...o{event_time_slot
event|o...o{comment
event||...o{event_timespan_range
task|o...o{comment
comment}o..||user
task||..||event_staff : task_creator
task||..o{assigned_staff
assigned_staff}o..||event_staff
user||..o{event_staff
@enduml